-- [[ KEY SYSTEM LOADER ]] --
local KeySystem = loadstring(game:HttpGet("https://raw.githubusercontent.com/wendigo5414-cmyk/scripts/refs/heads/main/keysystem.lua"))()
KeySystem.Init()

-- [[ GAME SCRIPT START (AURORA UI) ]] --
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Vovabro46/trash/refs/heads/main/Aurora.lua"))()

-- 1. Create a window
local Win = Library:Window("Prime X Hub", "crown", "Jump for Brainrots | by PXH", false)

-- ══════════════════════════════════════════
--              SERVICES & VARS
-- ══════════════════════════════════════════
local Players          = game:GetService("Players")
local RunService       = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer      = Players.LocalPlayer

local currentWalkspeed  = 16
local currentJumpHeight = 7.2
local headlessEnabled   = false

local function applyWalkspeed(character)
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.WalkSpeed = currentWalkspeed
    end
end

local function applyJumpHeight(character)
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.JumpHeight = currentJumpHeight
    end
end

local function applyHeadless(character)
    if not character then return end
    local head = character:FindFirstChild("Head")
    if head then
        head.Transparency = headlessEnabled and 1 or 0
        for _, v in ipairs(head:GetChildren()) do
            if v:IsA("Decal") then
                v.Transparency = headlessEnabled and 1 or 0
            end
        end
    end
end

LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("Humanoid")
    applyWalkspeed(char)
    applyJumpHeight(char)
    applyHeadless(char)
end)

local function getPlayerNames()
    local names = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then table.insert(names, player.Name) end
    end
    return #names > 0 and names or {"No players found"}
end

-- ══════════════════════════════════════════
--              UI STRUCTURE
-- ══════════════════════════════════════════
Win:TabSection("Hub Navigation")

-- Tabs
local MainTab = Win:Tab("Main", "home")
local MoveTab = Win:Tab("Movement", "move")
local TeleTab = Win:Tab("Teleport", "map-pin")

-- Pages
local MainPage = MainTab:Page("Dashboard", "layout-dashboard")
local MovePage = MoveTab:Page("Player Mods", "user")
local TelePage = TeleTab:Page("Waypoints", "map")

-- ══════════════════════════════════════════
--                 MAIN PAGE
-- ══════════════════════════════════════════
MainPage:Paragraph("Welcome to Prime X Hub", "Made for Jump for Brainrots\nVersion 2.0\nEnjoy the new UI!", "Left")

-- ══════════════════════════════════════════
--              MOVEMENT PAGE
-- ══════════════════════════════════════════
local MoveSec = MovePage:Section("Movement", "Left")
local ProtSec = MovePage:Section("Protection & Proximity", "Right")
local FunSec  = MovePage:Section("Fun", "Left")

-- [Movement Section]
MoveSec:Slider("Speed Slider", "WalkSpeedFlag", 16, 200, 16, function(Value)
    currentWalkspeed = Value
    applyWalkspeed(LocalPlayer.Character)
end, "Change your WalkSpeed")

MoveSec:Slider("Jump Height", "JumpHeightFlag", 7, 100, 7, function(Value)
    currentJumpHeight = Value
    applyJumpHeight(LocalPlayer.Character)
end, "Change your Jump Height")

local infiniteJumpEnabled = false
local jumpConnection
MoveSec:Toggle("INF Jump", "InfJumpFlag", false, "Allows you to jump infinitely", function(Value)
    infiniteJumpEnabled = Value
    if Value then
        jumpConnection = UserInputService.JumpRequest:Connect(function()
            if infiniteJumpEnabled then
                local character = LocalPlayer.Character
                if character and character:FindFirstChild("Humanoid") then
                    character.Humanoid:ChangeState("Jumping")
                end
            end
        end)
    else
        if jumpConnection then jumpConnection:Disconnect(); jumpConnection = nil end
    end
end)

local noclipEnabled = false
local noclipConnection
MoveSec:Toggle("No Clip", "NoClipFlag", false, "Walk through walls", function(Value)
    noclipEnabled = Value
    if Value then
        noclipConnection = RunService.Stepped:Connect(function()
            if noclipEnabled then
                local character = LocalPlayer.Character
                if character then
                    for _, v in ipairs(character:GetDescendants()) do
                        if v:IsA("BasePart") then v.CanCollide = false end
                    end
                end
            end
        end)
    else
        if noclipConnection then noclipConnection:Disconnect(); noclipConnection = nil end
    end
end)

-- [Protection & Proximity Section]
local godModeEnabled = false
ProtSec:Toggle("God Mode", "GodModeFlag", false, "Makes you immune to traps", function(Value)
    godModeEnabled = Value
    if Value then
        task.spawn(function()
            while godModeEnabled do
                local traps = workspace:FindFirstChild("Traps")
                if traps then
                    for _, v in ipairs(traps:GetDescendants()) do
                        if v:IsA("BasePart") then v.CanTouch = false end
                    end
                end
                task.wait(0.1)
            end
        end)
    else
        godModeEnabled = false
        local traps = workspace:FindFirstChild("Traps")
        if traps then
            for _, v in ipairs(traps:GetDescendants()) do
                if v:IsA("BasePart") then v.CanTouch = true end
            end
        end
    end
end)

local instantPromptsEnabled = false
local originalHoldDurations = {}
local promptAddedConnection

local function setPromptHoldDuration(prompt, instant)
    if instant then
        originalHoldDurations[prompt] = prompt.HoldDuration
        prompt.HoldDuration = 0
    else
        if originalHoldDurations[prompt] then
            prompt.HoldDuration = originalHoldDurations[prompt]
            originalHoldDurations[prompt] = nil
        end
    end
end

ProtSec:Toggle("Proximity Prompt", "ProxPromptFlag", false, "Instant interaction", function(Value)
    instantPromptsEnabled = Value
    if Value then
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("ProximityPrompt") then setPromptHoldDuration(v, true) end
        end
        promptAddedConnection = game.DescendantAdded:Connect(function(desc)
            if instantPromptsEnabled and desc:IsA("ProximityPrompt") then
                setPromptHoldDuration(desc, true)
            end
        end)
    else
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("ProximityPrompt") then setPromptHoldDuration(v, false) end
        end
        if promptAddedConnection then promptAddedConnection:Disconnect(); promptAddedConnection = nil end
    end
end)

-- [Fun Section]
FunSec:Toggle("Headless", "HeadlessFlag", false, "Makes your head invisible", function(Value)
    headlessEnabled = Value
    applyHeadless(LocalPlayer.Character)
end)

local rainbowTrailEnabled = false
local rainbowTrail = nil
local hue = 0

local function createRainbowTrail()
    local character = LocalPlayer.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    local att1 = Instance.new("Attachment"); att1.Position = Vector3.new(-1.5, 0, 0); att1.Parent = hrp
    local att2 = Instance.new("Attachment"); att2.Position = Vector3.new(1.5, 0, 0);  att2.Parent = hrp
    local trail = Instance.new("Trail")
    trail.Attachment0 = att1; trail.Attachment1 = att2
    trail.Lifetime = 1; trail.Enabled = true; trail.Parent = hrp
    rainbowTrail = trail
    task.spawn(function()
        while rainbowTrailEnabled and rainbowTrail and rainbowTrail.Parent do
            hue = (hue + 0.01) % 1
            rainbowTrail.Color = ColorSequence.new(Color3.fromHSV(hue, 1, 1))
            task.wait(0.05)
        end
    end)
end

FunSec:Toggle("Rainbow Trail", "RainbowTrailFlag", false, "Creates a color-changing trail behind you", function(Value)
    rainbowTrailEnabled = Value
    if Value then
        if rainbowTrail then rainbowTrail:Destroy() end
        createRainbowTrail()
    else
        if rainbowTrail then rainbowTrail:Destroy(); rainbowTrail = nil end
    end
end)

local originalHeadScale
FunSec:Toggle("Big Head", "BigHeadFlag", false, "Makes your head massive", function(Value)
    local character = LocalPlayer.Character
    if not character then return end
    local head = character:FindFirstChild("Head")
    if not head then return end
    if Value then
        originalHeadScale = originalHeadScale or head.Size
        head.Size = Vector3.new(5, 5, 5)
    else
        if originalHeadScale then head.Size = originalHeadScale end
    end
end)

-- ══════════════════════════════════════════
--              TELEPORT PAGE
-- ══════════════════════════════════════════
local PlayerTeleSec = TelePage:Section("Player Teleport", "Left")
local PosMemSec = TelePage:Section("Position Memory", "Right")

-- [Player Teleport]
local selectedPlayerName = nil

local PlayerDropdown = PlayerTeleSec:Dropdown("Select Player", "SelectPlayerFlag", getPlayerNames(), function(Value)
    selectedPlayerName = Value
end, "Choose a player to teleport to")

PlayerTeleSec:Button("Teleport to Selected Player", "Teleports you to the chosen player", function()
    if not selectedPlayerName or selectedPlayerName == "No players found" then
        Library:Notification("Error", "No player selected!", 3)
        return
    end
    local targetPlayer = Players:FindFirstChild(selectedPlayerName)
    if not targetPlayer then
        Library:Notification("Error", "Player not found in game!", 3)
        return
    end
    local targetModel = workspace:FindFirstChild(targetPlayer.Name)
    local targetCF = nil
    if targetModel and targetModel:FindFirstChild("HumanoidRootPart") then
        targetCF = targetModel.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
    elseif targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        targetCF = targetPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
    end
    
    if targetCF then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = targetCF
            Library:Notification("Teleported!", "Teleported to " .. selectedPlayerName, 3)
        end
    else
        Library:Notification("Error", "Could not find " .. selectedPlayerName .. "'s position!", 3)
    end
end)

-- Optional: Add a refresh button if Aurora doesn't automatically dynamically update dropdown arrays
PlayerTeleSec:Button("Refresh Player List", "Fetches latest players in server", function()
    -- Some versions of this UI have a :Refresh() method
    if PlayerDropdown.Refresh then 
        PlayerDropdown:Refresh(getPlayerNames()) 
        Library:Notification("Refreshed", "Player list has been updated.", 2)
    end
end)

-- [Position Memory]
local savedPos = nil

PosMemSec:Button("Save Current Position", "Stores where you are standing right now", function()
    local character = LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        savedPos = character.HumanoidRootPart.CFrame
        Library:Notification("Position Saved!", "Current position stored.", 2)
    else
        Library:Notification("Error", "Character not found!", 2)
    end
end)

PosMemSec:Button("Teleport to Saved Position", "Teleports you back to the saved position", function()
    if savedPos then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = savedPos
            Library:Notification("Teleported!", "Returned to saved position.", 2)
        end
    else
        Library:Notification("No Position Saved", "Save a position first!", 2)
    end
end)

-- ══════════════════════════════════════════
--           CONFIG & INITIALIZATION
-- ══════════════════════════════════════════
Library:Notification("Prime X Hub", "Script loaded successfully!", 5)

-- Load built-in Aurora config system at the end
Library:ConfigSystem(Win)
